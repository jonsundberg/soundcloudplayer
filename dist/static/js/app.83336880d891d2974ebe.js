webpackJsonp([0],{"0XCg":function(t,e){},"3W2k":function(t,e){},ISu3:function(t,e){},Kmme:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[i("div",{staticClass:"form-inline"},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search soundcloud"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),i("span",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.search()}}},[i("i",{staticClass:"fa fa-search"})])])])])])},staticRenderFns:[]};var s=i("VU/8")({name:"search",data:function(){return{query:""}},methods:{search:function(){this.$emit("click",this.query)}}},n,!1,function(t){i("3W2k")},"data-v-20ebf5a6",null).exports,o={name:"range",props:["min","max","text","value"],data:function(){return{internalValue:this.mapNumber(this.value,this.min,this.max,0,100),active:!1,initialX:void 0,initialY:void 0,initialDragValue:void 0,shiftPressed:!1}},computed:{rotation:function(){var t=this.mapNumber(this.internalValue,0,100,0,270)-135;return"rotate( "+t+" 17 15)"}},watch:{value:function(){this.$emit("change",this.value)}},methods:{mapNumber:function(t,e,i,a,n){return n=parseFloat(n),a=parseFloat(a),i=parseFloat(i),(t-(e=parseFloat(e)))*(n-a)/(i-e)+a},activate:function(t){this.initialX=t.pageX||t.changedTouches[0].pageX,this.initialY=t.pageY||t.changedTouches[0].pageY,this.active=!0,this.initialDragValue=this.internalValue,document.onmouseup=this.deactivate,document.addEventListener("touchend",this.deactivate),document.onmousemove=this.dragHandler,document.addEventListener("touchmove",this.dragHandler)},dragHandler:function(t){var e=t.pageX||t.changedTouches[0].pageX,i=t.pageY||t.changedTouches[0].pageY;Math.abs(e-this.initialX)>Math.abs(i-this.initialY)?this.shiftPressed?this.internalValue=this.initialDragValue+(e-this.initialX)/10:this.internalValue=this.initialDragValue+(e-this.initialX)/3:this.shiftPressed?this.internalValue=this.initialDragValue+(this.initialY-i)/10:this.internalValue=this.initialDragValue+(this.initialY-i)/3,this.internalValue>100&&(this.internalValue=100),this.internalValue<0&&(this.internalValue=0),isNaN(this.internalValue)&&(this.internalValue=this.initialDragValue),this.$emit("input",this.mapNumber(this.internalValue,0,100,this.min,this.max))},deactivate:function(){document.onmouseup=void 0,document.onmousemove=void 0,document.removeEventListener("touchmove",this.dragHandler),document.removeEventListener("touchend",this.deactivate),this.active=!1}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"knob",attrs:{width:"34",height:"50"},on:{mousedown:t.activate,touchstart:t.activate}},[i("circle",{staticClass:"shadow",attrs:{cx:"17",cy:"17",r:"16"}}),t._v(" "),i("circle",{staticClass:"main",attrs:{cx:"17",cy:"17",r:"13"}}),t._v(" "),i("line",{attrs:{x1:"17",y1:"15",x2:"17",y2:"3",transform:t.rotation}}),t._v(" "),i("text",{attrs:{x:"17",y:"43"}},[t._v(t._s(t.text))])])},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(t){i("Kmme")},"data-v-2d694ce6",null).exports,u=window.AudioContext?new AudioContext:new webkitAudioContext,l={name:"player",components:{Range:c},data:function(){return{playing:!1,currentTime:"00:00",currentTimeMillis:0,totalDuration:0,rangeActive:!1,controls:{gain:.5,high:0,low:0},nodes:{source:void 0,gain:void 0,treble:void 0,low:void 0}}},props:{track:{type:Object,default:{title:"",artwork_url:"",user:{}}}},computed:{duration:function(){return this.audio?this.time.millisToReadable(this.totalDuration):"00:00"}},watch:{track:function(){this.playTrack()}},mounted:function(){this.init()},beforeDestroy:function(){this.removeEventListeners()},methods:{init:function(){this.setupAudio()},togglePlay:function(){this.playing?this.audio.pause():this.audio.play()},stop:function(){this.playing&&(this.audio.pause(),this.audio.currentTime=0)},changeGain:function(){this.nodes.gain.gain.value=parseFloat(this.controls.gain)},changeHigh:function(){this.nodes.high.gain.value=parseFloat(this.controls.high)},changeLow:function(){this.nodes.low.gain.value=parseFloat(this.controls.low)},onPlayPause:function(t){this.playing="pause"!==t.type},onTimeUpdated:function(){this.currentTimeMillis=this.audio.currentTime,this.currentTime=this.time.millisToReadable(parseInt(this.currentTimeMillis))},onTrackLoaded:function(){this.totalDuration=this.audio.duration},setupAudio:function(){this.audio=new Audio,this.audio.crossOrigin="anonymous",this.nodes.source=u.createMediaElementSource(this.audio),this.nodes.gain=u.createGain(),this.initFilters(),this.connectNodes(),this.addEventListeners()},initFilters:function(){this.nodes.analyser=u.createAnalyser(),this.nodes.low=u.createBiquadFilter(),this.nodes.low.type="lowshelf",this.nodes.low.frequency.value=200,this.nodes.low.gain.value=0,this.nodes.mid=u.createBiquadFilter(),this.nodes.mid.type="peaking",this.nodes.mid.frequency.value=1e3,this.nodes.mid.Q.value=.5,this.nodes.mid.gain.value=0,this.nodes.high=u.createBiquadFilter(),this.nodes.high.type="highshelf",this.nodes.high.frequency.value=3200,this.nodes.high.gain.value=0},connectNodes:function(){this.nodes.source.connect(this.nodes.analyser),this.nodes.analyser.connect(this.nodes.low),this.nodes.low.connect(this.nodes.mid),this.nodes.mid.connect(this.nodes.high),this.nodes.high.connect(this.nodes.gain),this.nodes.gain.connect(u.destination)},addEventListeners:function(){this.audio.addEventListener("timeupdate",this.onTimeUpdated),this.audio.addEventListener("loadeddata",this.onTrackLoaded),this.audio.addEventListener("pause",this.onPlayPause),this.audio.addEventListener("play",this.onPlayPause)},removeEventListeners:function(){this.audio.removeEventListener("timeupdate",this.onTimeUpdated),this.audio.removeEventListener("loadeddata",this.onTrackLoaded),this.audio.removeEventListener("pause",this.onPlayPause),this.audio.removeEventListener("play",this.onPlayPause)},playTrack:function(){this.stop(),this.audio.src=this.track.stream_url+"?client_id="+this.constants.SOUNDCLOUD_CLIENT_ID,this.audio.play()}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"player"}},[i("div",{staticClass:"current-track "},[i("div",{staticClass:"cover",style:{"background-image":"url("+t.track.artwork_url+")"}}),t._v(" "),t.track.stream_url?i("div",{staticClass:"cover-overlay"},[t.playing?i("i",{staticClass:"fa fa-pause button",on:{click:function(e){t.togglePlay()}}}):i("i",{staticClass:"fa fa-play button",on:{click:function(e){t.togglePlay()}}})]):t._e(),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.playing?i("div",{staticClass:"info"},[i("p",[t._v(t._s(t.track.title))]),t._v(" "),i("img",{staticClass:"avatar",attrs:{src:t.track.user.avatar_url}}),t._v(" "+t._s(t.track.user.username)),t._v(" "),i("div",{staticClass:"duration"},[i("p",[t._v(t._s(t.currentTime)+"  / "+t._s(t.duration))])]),t._v(" "),i("div",{staticClass:"equalizer"},[i("range",{attrs:{min:"0",max:"1",text:"volume"},on:{change:function(e){t.changeGain()}},model:{value:t.controls.gain,callback:function(e){t.$set(t.controls,"gain",e)},expression:"controls.gain"}}),t._v(" "),i("range",{attrs:{min:"-40",max:"40",text:"treble"},on:{change:function(e){t.changeHigh()}},model:{value:t.controls.high,callback:function(e){t.$set(t.controls,"high",e)},expression:"controls.high"}}),t._v(" "),i("range",{attrs:{min:"-10",max:"10",text:"bass"},on:{change:function(e){t.changeLow()}},model:{value:t.controls.low,callback:function(e){t.$set(t.controls,"low",e)},expression:"controls.low"}})],1)]):t._e()]),t._v(" "),i("div",{staticClass:"slidecontainer"},[i("input",{staticClass:"slider",attrs:{type:"range",min:"0",max:t.totalDuration},domProps:{value:t.currentTimeMillis},on:{change:function(e){t.timeTravel(t.currentTimeMillis)}}})])],1)])},staticRenderFns:[]};var h={name:"soundcloudPlayer",components:{Search:s,Player:i("VU/8")(l,d,!1,function(t){i("0XCg")},"data-v-aaca99a4",null).exports},data:function(){return{query:"",tracks:[],showResult:!1,currentTrack:{title:"",user:{}}}},mounted:function(){this.init()},methods:{init:function(){SC.initialize({client_id:this.constants.SOUNDCLOUD_CLIENT_ID})},doQuery:function(t){var e=this,i={limit:100,q:t};SC.get("/tracks",i).then(function(t){e.tracks=t,e.showResult=!0})},setCurrentTrack:function(t){this.currentTrack=t}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"player-app"}},[i("player",{attrs:{track:t.currentTrack}}),t._v(" "),i("div",{staticClass:"header"},[i("search",{on:{click:t.doQuery},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.showResult?i("div",{staticClass:"row result"},t._l(t.tracks,function(e){return i("div",{staticClass:"col-sm-12 track",on:{click:function(i){t.setCurrentTrack(e)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-1"},[i("img",{attrs:{src:e.artwork_url}})]),t._v(" "),i("div",{staticClass:"col-sm-11"},[i("div",{staticClass:"info"},[i("h5",[t._v(t._s(e.title))]),t._v(" "),i("img",{staticClass:"avatar",attrs:{src:e.user.avatar_url}}),t._v(" "+t._s(e.user.username))])])])])})):t._e()])],1)},staticRenderFns:[]};var m={name:"App",components:{soundcloudPlayer:i("VU/8")(h,v,!1,function(t){i("j8QF")},"data-v-394a7e5e",null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid",attrs:{id:"app"}},[e("soundcloud-player")],1)},staticRenderFns:[]};var f=i("VU/8")(m,p,!1,function(t){i("ISu3")},null,null).exports;a.a.config.productionTip=!1,a.a.prototype.constants={SOUNDCLOUD_CLIENT_ID:"3a792e628dbaf8054e55f6e134ebe5fa"},a.a.prototype.time={millisToReadable:function(t){var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e}},new a.a({el:"#app",components:{App:f},template:"<App/>"})},j8QF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.83336880d891d2974ebe.js.map